<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.itwillbs.camcar.mapper.MyPageMapper">

<!-- 회원 상세정보 조회 SELECT-->
	<!-- 아이디(id)가 일치하는 레코드 조회-->
	<select id="selectMember" resultType="member">
		SELECT *
		FROM member_info
		WHERE mem_id = #{mem_id}
	</select>
	
	
	
	<!-- 회원 탈퇴 - UPDATE -->
	<!-- 아이디(id)가 일치하는 레코드의 회원상태(mem_status) 컬럼값을 3 으로 수정 -->
	<update id="updateWithdrawMember">
		UPDATE member_info
		SET
			mem_status = 3
			, mem_withdraw_date = now()
		WHERE
			mem_id = #{mem_id}
	</update>
	
<!-- 	운전자 상세정보 조회 SELECT -->
	<select id="selectDriver" resultType="driver">
<!-- 		SELECT  -->
<!-- 			m.mem_id, d.dri_name, d.dri_tel, d.dri_birthday -->
<!-- 			, d.lic_num, d,lic_info, d.lic_issue_date -->
<!-- 			, d.lic_expiration_date -->
<!-- 		FROM  -->
<!-- 			drivers_info d -->
<!-- 		JOIN  -->
<!-- 			member_info m -->
<!-- 		ON  -->
<!-- 			m.mem_id = d.mem_id -->
<!-- 		WHERE  -->
<!-- 			m.mem_id = #{mem_id} -->
		SELECT *
		FROM drivers_info
		WHERE mem_id = #{id}
	 </select>
	
	<!-- 회원 정보 수정 - UPDATE -->
	<!-- 이름, 비밀번호(옵션), 우편번호, 주소1, 주소2, 이메일(결합필요), 직업, 성별, 취미, 가입동기 -->
	<update id="updateMember">
		UPDATE member_info
		SET
		
			<!-- 
			새 패스워드(mem_passwd) 입력 여부에 따라 패스워드 UPDATE 여부가 결정되어야 한다!
			=> 동적 SQL 필요
			-->
			mem_passwd = #{mem_passwd}
			
		WHERE
			mem_tel = #{mem_tel}
	</update>
	

	
</mapper>